<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primavera Companion</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <h1>Primavera Companion</h1>
            <p class="subtitle">Your personalized Primavera Sound festival schedule</p>
        </div>
    </header>

    <main class="container">
        <section class="intro">
            <h2>Discover Your Perfect Primavera Experience</h2>
            <p>Primavera Companion analyzes your music taste and recommends the artists you should see at the festival. No more FOMO, just the perfect schedule for you!</p>
        </section>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="flash-messages">
              {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <section class="how-it-works">
            <h2>How It Works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Export Your Spotify Data</h3>
                    <p>Visit <a href="https://exportify.net" target="_blank">Exportify.net</a> and export your favorite playlist as a CSV file.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Upload Your Playlist</h3>
                    <p>Upload your exported CSV file below.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Get Personalized Recommendations</h3>
                    <p>We'll analyze your music taste and match it with Primavera artists.</p>
                </div>
            </div>
        </section>

        <section class="upload-section">
            <h2>Upload Your Playlist</h2>
            <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" class="upload-form">
                <div class="file-upload">
                    <input type="file" name="file" id="file" class="inputfile" accept=".csv" required>
                    <label for="file">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg>
                        <span>Choose a file&hellip;</span>
                    </label>
                    <span id="file-name" class="file-name">No file selected</span>
                </div>
                <button type="submit" class="button">Generate Recommendations</button>
            </form>
        </section>

        <section class="features">
            <h2>Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>AI-Powered Recommendations</h3>
                    <p>Our machine learning model analyzes multiple aspects of your music taste to find the best matches.</p>
                </div>
                <div class="feature-card">
                    <h3>Discover New Artists</h3>
                    <p>Find new artists at Primavera that align with your music preferences but you haven't discovered yet.</p>
                </div>
                <div class="feature-card">
                    <h3>Optimize Your Schedule</h3>
                    <p>Focus on artists you'll truly enjoy instead of wandering aimlessly between stages.</p>
                </div>
                <div class="feature-card">
                    <h3>Data Privacy</h3>
                    <p>Your playlist data is only used for generating recommendations and is not stored permanently.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Primavera Companion</p>
            <nav>
                <a href="{{ url_for('about') }}">About</a>
                <a href="https://github.com/yourusername/primavera-companion" target="_blank">GitHub</a>
            </nav>
        </div>
    </footer>

    <script>
        // Display selected filename
        document.getElementById('file').addEventListener('change', function(e) {
            var fileName = e.target.files[0] ? e.target.files[0].name : 'No file selected';
            document.getElementById('file-name').textContent = fileName;
        });
    </script>
</body>
</html>